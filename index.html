<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <title>Canvas Tank Game</title>
    <style>canvas {
        border: 1px solid black;
    }

    body {
        font-family: "Comic Sans MS", cursive, sans-serif;
    }</style>
</head>
<body><h1>Gud Tankk Gam</h1>
<h2>a &amp; d = muv space = shuut</h2>
<canvas id="c" width="800" height="600"></canvas>
<script>const a = document.getElementById("c"), b = a.getContext("2d"), c = {x: 50, y: a.height - 50, w: 50, t: -45},
    g = [];
let d = {x: 0, y: 0, r: c.w};

function h() {
    d.x = Math.random() * a.width / 3 + 2 * a.width / 3, d.y = Math.random() * (a.height - d.r) + d.r
}

function i() {
    b.fillStyle = "black", b.fillRect(c.x - c.w / 2, c.y - c.w / 2, c.w, c.w), b.beginPath(), b.moveTo(c.x, c.y), b.lineTo(c.x + Math.cos(c.t * Math.PI / 180) * c.w, c.y + Math.sin(c.t * Math.PI / 180) * c.w), b.stroke()
}

function j() {
    b.fillStyle = "red", b.beginPath(), b.arc(d.x, d.y, d.r, 0, 2 * Math.PI), b.fill()
}

function k() {
    b.fillStyle = "black";
    for (const a of g) b.beginPath(), b.arc(a.x, a.y, a.r, 0, 2 * Math.PI), b.fill()
}

function l() {
    for (const a of g) a.x += a.vx, a.y += a.vy;
    g.forEach(((a, b) => {
        if (a.x > a.width || a.y > a.height || a.y < 0) return g.splice(b, 1);
        const c = Math.sqrt((a.x - d.x) * (a.x - d.x) + (a.y - d.y) * (a.y - d.y));
        c <= a.r + d.r && (g.splice(b, 1), h())
    }))
}

function m() {
    b.clearRect(0, 0, a.width, a.height), i(), j(), k(), l(), requestAnimationFrame(m)
}

h(), m(), document.addEventListener("keydown", a => {
    "a" === a.key.toLowerCase() && (c.t -= 5), "d" === a.key.toLowerCase() && (c.t += 5), " " === a.key && g.push({
        x: c.x,
        y: c.y,
        r: 5,
        vx: 10 * Math.cos(c.t * Math.PI / 180),
        vy: 10 * Math.sin(c.t * Math.PI / 180)
    })
});</script>
</body>
</html>
